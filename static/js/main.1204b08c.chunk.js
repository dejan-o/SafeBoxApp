(this.webpackJsonphotel_safe_box=this.webpackJsonphotel_safe_box||[]).push([[0],{10:function(e,n,t){},19:function(e,n,t){},20:function(e,n,t){},26:function(e,n,t){},27:function(e,n,t){},28:function(e,n,t){},30:function(e,n,t){"use strict";t.r(n);var c=t(1),s=t(0),r=t.n(s),u=t(5),i=t.n(u),o=(t(19),t(20),t(10),t(3)),a={HANDLE_KEYPRESS:"KEYPRESS",SET_SCREEN_ACTIVE:"SET_SCREEN_ACTIVE",SET_SCREEN_MESSAGE:"SET_SCREEN_MESSAGE",SET_IS_LOCKED:"SET_IS_LOCKED",SET_BOX_CODE:"SET_BOX_CODE",RESET_INPUT_SEQUENCE:"RESET_INPUT_SEQUENCE",SET_SERVICE_MODE:"SET_SERVICE_MODE"},E=function(e){return{type:a.HANDLE_KEYPRESS,payload:e}},S=function(e){return{type:a.SET_SCREEN_MESSAGE,payload:e}},f=function(){return{type:a.RESET_INPUT_SEQUENCE}},d=function(e){return{type:a.SET_SERVICE_MODE,payload:e}},l=[7,8,9,4,5,6,1,2,3,"*",0,"L"],_=4815162342,b="",p="Locking...",j="Unlocking...",O="Error",T="Ready",v="Service",g=function(e){var n=e.inputSequence,t=e.isLocked,s=e.isActive,r=e.screenMessage,u=e.renderSequence;return Object(c.jsxs)("section",{className:"panel-screen ".concat(s?"panel-screen--light-on":"panel-screen--light-off"),children:[Object(c.jsx)("span",{className:"panel-screen__status",children:t?"Locked":"Unlocked"}),Object(c.jsx)("span",{className:"panel-screen__message",children:u(n)||r})]})},h=Object(o.b)((function(e){return{screenMessage:e.screenMessage,inputSequence:e.inputSequence,isLocked:e.isLocked,boxCode:e.code,isActive:e.isActive,isServiceMode:e.isServiceMode}}),(function(e){return{setScreenMessage:function(n){return e(S(n))},resetInputSequence:function(){return e(f())},setIsLocked:function(){return e({type:a.SET_IS_LOCKED})},setBoxCode:function(n){return e({type:a.SET_BOX_CODE,payload:n})},setScreenActive:function(n){return e(function(e){return{type:a.SET_SCREEN_ACTIVE,payload:e}}(n))},setServiceMode:function(n){return e(d(n))},serviceModeProcess:function(n,t,c,s){return e(function(e,n,t,c){return function(s){s(f()),s(S("Validating...")),fetch("https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a?c\n\t\tode=".concat(e)).then((function(e){return e.json()})).then((function(e){e===n?t():c(),s(d(!1))}))}}(n,t,c,s))}}}))((function(e){var n=e.screenMessage,t=e.inputSequence,s=e.isLocked,u=e.setScreenMessage,i=e.resetInputSequence,o=e.setIsLocked,a=e.setBoxCode,E=e.boxCode,S=e.setScreenActive,f=e.isActive,d=e.setServiceMode,l=e.serviceModeProcess,h=e.isServiceMode;function C(){i(),u(j),setTimeout((function(){a(""),o(),u(T),setTimeout((function(){u(b)}),500)}),3e3)}function M(){i(),u(O),setTimeout((function(){u(b)}),1e3)}return r.a.useEffect((function(){t&&!f&&S(!0);var e=setTimeout((function(){var e;t&&(s?!function(e,n){return 6===e.length&&"number"===typeof+e&&e===n&&!h}(t,E)?h?l(t,_,C,M):t!==E&&"000000"===t?(i(),d(!0),u(v),setTimeout((function(){setTimeout((function(){u(b)}),500)}),700)):M():C():"L"===(e=t)[e.length-1]&&7===e.length&&"number"===typeof+e.substring(0,6)?function(){var e=t.substring(0,6);a(e),i(),u(p),setTimeout((function(){o(),u(T),setTimeout((function(){u(b)}),500)}),3e3)}():M())}),1200);return function(){clearTimeout(e)}}),[t]),r.a.useEffect((function(){var e=setTimeout((function(){f&&S(!1)}),5e3);return function(){return clearTimeout(e)}}),[s,f,t,n]),Object(c.jsx)(g,{isActive:f,isLocked:s,inputSequence:t,screenMessage:n,renderSequence:function(e){return e.length?(e>10&&(e=e.substring(e.length-10)),"L"!==e[e.length-1]||s?e:e.substring(0,e.length-1)):""}})})),C=(t(26),Object(o.b)((function(e){return{screenMessage:e.screenMessage}}),(function(e){return{handleKeyPress:function(n){return e(E(n))}}}))((function(e){var n=e.buttonValue,t=e.handleKeyPress,s=e.screenMessage;return Object(c.jsx)("button",{className:"panel-button",value:n,onClick:function(e){s||t(e.target.value)},children:n})}))),M=(t(27),Object(o.b)((function(e){return{screenMessage:e.screenMessage}}),(function(e){return{handleKeyPress:function(n){return e(E(n))}}}))((function(e){var n=e.handleKeyPress,t=e.screenMessage,s=l;function u(e){if(!t){["0","1","2","3","4","5","6","7","8","9","L","*"].includes(e.key)&&n(e.key)}}return r.a.useEffect((function(){return document.addEventListener("keypress",u),function(){return document.removeEventListener("keypress",u)}}),[t]),Object(c.jsx)("section",{className:"panel-buttons",children:s.map((function(e,n){return Object(c.jsx)(C,{buttonValue:e},n)}))})}))),m=(t(28),function(){return Object(c.jsxs)("div",{className:"serial-number",children:["S / N: ",_]})});var y=function(){return Object(c.jsxs)("div",{className:"panel",children:[Object(c.jsx)(h,{}),Object(c.jsx)(M,{}),Object(c.jsx)(m,{})]})},N=t(4),L=(t(29),t(13)),x=t(2),R={isLocked:!1,screenMessage:"",isActive:!1,code:"",inputSequence:"",isServiceMode:!1},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case a.HANDLE_KEYPRESS:return Object(x.a)(Object(x.a)({},e),{},{inputSequence:e.inputSequence+n.payload});case a.SET_SCREEN_ACTIVE:return Object(x.a)(Object(x.a)({},e),{},{isActive:n.payload});case a.SET_SCREEN_MESSAGE:return Object(x.a)(Object(x.a)({},e),{},{screenMessage:n.payload});case a.SET_IS_LOCKED:return Object(x.a)(Object(x.a)({},e),{},{isLocked:!e.isLocked});case a.SET_BOX_CODE:return Object(x.a)(Object(x.a)({},e),{},{code:n.payload});case a.RESET_INPUT_SEQUENCE:return Object(x.a)(Object(x.a)({},e),{},{inputSequence:""});case a.SET_SERVICE_MODE:return Object(x.a)(Object(x.a)({},e),{},{isServiceMode:n.payload});default:return e}},I=[L.a];var A=Object(N.c)(k,N.a.apply(void 0,I));i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(o.a,{store:A,children:Object(c.jsx)(y,{})})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.1204b08c.chunk.js.map